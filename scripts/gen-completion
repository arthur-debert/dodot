#!/usr/bin/env bash
set -euo pipefail

# Always build the binary to ensure it's for the current platform
echo "Building dodot..."
./scripts/build

# Create completions directory
mkdir -p completions

# Generate completions
echo "Generating bash completion..."
./dodot completion bash > completions/dodot.bash

echo "Generating zsh completion..."
./dodot completion zsh > completions/_dodot

echo "Generating fish completion..."
./dodot completion fish > completions/dodot.fish

echo "âœ… Completions generated in completions/"